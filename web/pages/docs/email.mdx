import { MAX_EMAIL_SENDS_PER_HOUR } from '../../config/contants'

# Email Functionality

JSX Mail is primarily designed for email template creation, not for email dispatch. Nevertheless, to facilitate development testing or the creation of prototypes and small-scale projects, JSX Mail includes a basic email-sending feature.

It's crucial to note that sending emails via JSX Mail is exclusively possible when using an address provisioned from JSX Mail Cloud. These addresses, formatted as `username@jsxmail.org`, are designated solely for sending emails and do not support incoming mail.

Each email account from JSX Mail Cloud is subject to a sending restriction of {MAX_EMAIL_SENDS_PER_HOUR} emails per hour. Should your requirements exceed this threshold, alternatives such as the `nodemailer` library or a professional email service might be more appropriate. Remember, JSX Mail Cloud is best suited for modest-scale applications.

## Creating an Email Account

To set up a free JSX Mail Cloud email account, execute the following command in your terminal. During the process, JSX Mail will prompt you for specific details necessary for account creation. Provide the requested information and await the completion of your account setup.

```sh
yarn jsxm mail create
```

## Authentication

Acquiring a token is mandatory to utilize your JSX Mail Cloud email. Generating this token is straightforward. Initiate the process with the command below, and input the username you specified during the account creation step.

```sh
yarn jsxm mail auth
```

The system will send the generated token to the email you entered in the “email for two-factor authentication” field when creating your account. Go to your inbox to find and copy the token.

## Sending Emails

Before attempting to send an email, ensure you have obtained the necessary token and have stored it as an environment variable named `JSX_MAIL_TOKEN`. Here's an example of how to set the environment variable in a `.env` file:

```js filename=".env"
JSX_MAIL_TOKEN="eyJfaWQiOiI2NWFhYjE0OWIxNmJkYTBlZTZ..."
```

With the token properly configured, you can now employ the `send` function from jsx-mail to dispatch your emails. JSX Mail will automatically retrieve the `JSX_MAIL_TOKEN` value and utilize it to transmit your emails through JSX Mail Cloud, linked to your token.

Here's a sending example:

```javascript
const jsxMail = require('jsx-mail');

await jsxMail.send('your:template:name', { 
  subject: 'Your Email Subject',
  to: ['example@example.com'],
  props: { key: 'value' },
});
```

## Deleting an Email Account

Should the need arise to eliminate a JSX Mail Cloud email account, the process is uncomplicated but irreversible. To proceed with deletion, use the command below. You will be prompted to input the token associated with the JSX Mail Cloud email account you wish to remove.

```sh
yarn jsxm mail delete
```

After that, the email account will be permanently deleted.